(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Cuby, Paddle, config, create, downKey, game, paddles, preload, upKey, update, updateBlue, updateOrange;

config = require("./config.coffee");

Paddle = require("./paddle.coffee");

Cuby = require("./cuby.coffee");

paddles = [];

upKey = {};

downKey = {};

preload = function() {
  console.log(':preload');
  game.load.image('paddle', 'assets/images/paddle.png');
  return game.load.image('qb', 'assets/images/qb.png');
};

create = function() {
  console.log(':create');
  game.stage.backgroundColor = config.backgroundColor;
  game.physics.startSystem(Phaser.Physics.ARCADE);
  paddles[config.colorCodes.blue] = new Paddle(game, config.colorCodes.blue);
  paddles[config.colorCodes.orange] = new Paddle(game, config.colorCodes.orange);
  upKey = game.input.keyboard.addKey(Phaser.Keyboard.W);
  return downKey = game.input.keyboard.addKey(Phaser.Keyboard.S);
};

updateBlue = function() {
  console.log(':updateBlue');
  paddles[config.colorCodes.blue].update();
  console.log('upKey' + upKey.isDown);
  if (upKey.isDown) {
    paddles[config.colorCodes.blue].move(config.dirCodes.up);
  }
  if (downKey.isDown) {
    return paddles[config.colorCodes.blue].move(config.dirCodes.down);
  }
};

updateOrange = function() {
  console.log(":updateOrange");
  return paddles[config.colorCodes.blue].update;
};

update = function() {
  console.log(':update');
  updateBlue();
  return updateOrange();
};

game = new Phaser.Game(config.screenWidth, config.screenHeight, Phaser.AUTO, '', {
  preload: preload,
  create: create,
  update: update
});


},{"./config.coffee":2,"./cuby.coffee":3,"./paddle.coffee":4}],2:[function(require,module,exports){
var config;

config = {
  backgroundColor: "#350f28",
  screenWidth: 1080,
  screenHeight: 600,
  spriteScale: 8,
  colorCodes: {
    blue: 0,
    orange: 1
  },
  dirCodes: {
    up: 0,
    down: 1
  },
  paddleSpeed: 400,
  paddleMargin: 40
};

module.exports = config;


},{}],3:[function(require,module,exports){
var Cuby, config;

config = require("./config.coffee");

Cuby = function(game, pos) {
  this.pos = pos;
  this.sprite = game.add.sprite(pos.x, pos.y, 'cuby');
  this.sprite.scale.setTo(config.spriteScale, config.spriteScale);
  game.physics.arcade.enable(this.sprite);
  this.sprite.body.velocity = new Phaser.Point(0, 0);
  this.fire = function(direction) {
    console.log("cuby fired");
    return this.sprite.body.velocity = direction;
  };
  this.trail = function(color, time) {
    return console.log("should emit");
  };
  return this;
};

module.exports = Cuby;


},{"./config.coffee":2}],4:[function(require,module,exports){
var Paddle, config;

config = require("./config.coffee");

Paddle = function(game, colorCode) {
  var x, y;
  this.colorCode = colorCode;
  x = 0;
  y = config.screenHeight / 2 - game.cache.getImage('paddle').height * config.spriteScale / 2;
  switch (colorCode) {
    case config.colorCodes.blue:
      x = config.paddleMargin;
      break;
    case config.colorCodes.orange:
      x = config.screenWidth - config.paddleMargin - game.cache.getImage('paddle').width * config.spriteScale;
  }
  this.sprite = game.add.sprite(x, y, 'paddle');
  this.sprite.scale.setTo(config.spriteScale, config.spriteScale);
  game.physics.arcade.enable(this.sprite);
  this.move = function(direction) {
    console.log("moving");
    switch (direction) {
      case config.dirCodes.up:
        return this.sprite.body.velocity = new Phaser.Point(0, -config.paddleSpeed);
      case config.dirCodes.down:
        return this.sprite.body.velocity = new Phaser.Point(0, config.paddleSpeed);
    }
  };
  this.update = function() {
    return this.sprite.body.velocity = new Phaser.Point(0, 0);
  };
  return this;
};

module.exports = Paddle;


},{"./config.coffee":2}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3dpbGxpYW0vZGV2L2xvc3Rjb2RlL2dub1BvcnRhbC9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS93aWxsaWFtL2Rldi9sb3N0Y29kZS9nbm9Qb3J0YWwvc2NyaXB0cy9jb2ZmZWUvYXBwLmNvZmZlZSIsIi9ob21lL3dpbGxpYW0vZGV2L2xvc3Rjb2RlL2dub1BvcnRhbC9zY3JpcHRzL2NvZmZlZS9jb25maWcuY29mZmVlIiwiL2hvbWUvd2lsbGlhbS9kZXYvbG9zdGNvZGUvZ25vUG9ydGFsL3NjcmlwdHMvY29mZmVlL2N1YnkuY29mZmVlIiwiL2hvbWUvd2lsbGlhbS9kZXYvbG9zdGNvZGUvZ25vUG9ydGFsL3NjcmlwdHMvY29mZmVlL3BhZGRsZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxJQUFBLHNHQUFBOztBQUFBLE1BQUEsR0FBUyxPQUFBLENBQVEsaUJBQVIsQ0FBVCxDQUFBOztBQUFBLE1BQ0EsR0FBUyxPQUFBLENBQVEsaUJBQVIsQ0FEVCxDQUFBOztBQUFBLElBRUEsR0FBTyxPQUFBLENBQVEsZUFBUixDQUZQLENBQUE7O0FBQUEsT0FJQSxHQUFVLEVBSlYsQ0FBQTs7QUFBQSxLQU1BLEdBQVEsRUFOUixDQUFBOztBQUFBLE9BT0EsR0FBVSxFQVBWLENBQUE7O0FBQUEsT0FTQSxHQUFVLFNBQUEsR0FBQTtBQUNSLEVBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxVQUFaLENBQUEsQ0FBQTtBQUFBLEVBRUEsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFWLENBQWdCLFFBQWhCLEVBQTBCLDBCQUExQixDQUZBLENBQUE7U0FHQSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQVYsQ0FBZ0IsSUFBaEIsRUFBc0Isc0JBQXRCLEVBSlE7QUFBQSxDQVRWLENBQUE7O0FBQUEsTUFlQSxHQUFT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cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjb25maWcgPSByZXF1aXJlIFwiLi9jb25maWcuY29mZmVlXCJcblBhZGRsZSA9IHJlcXVpcmUgXCIuL3BhZGRsZS5jb2ZmZWVcIlxuQ3VieSA9IHJlcXVpcmUgXCIuL2N1YnkuY29mZmVlXCJcblxucGFkZGxlcyA9IFsgXVxuXG51cEtleSA9IHsgfVxuZG93bktleSA9IHsgfVxuXG5wcmVsb2FkID0gLT5cbiAgY29uc29sZS5sb2cgJzpwcmVsb2FkJ1xuXG4gIGdhbWUubG9hZC5pbWFnZSgncGFkZGxlJywgJ2Fzc2V0cy9pbWFnZXMvcGFkZGxlLnBuZycpXG4gIGdhbWUubG9hZC5pbWFnZSgncWInLCAnYXNzZXRzL2ltYWdlcy9xYi5wbmcnKVxuXG5jcmVhdGUgPSAtPlxuICBjb25zb2xlLmxvZyAnOmNyZWF0ZSdcblxuICBnYW1lLnN0YWdlLmJhY2tncm91bmRDb2xvciA9IGNvbmZpZy5iYWNrZ3JvdW5kQ29sb3JcblxuICBnYW1lLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuQVJDQURFKVxuXG4gIHBhZGRsZXNbY29uZmlnLmNvbG9yQ29kZXMuYmx1ZV0gPSBuZXcgUGFkZGxlKGdhbWUsIGNvbmZpZy5jb2xvckNvZGVzLmJsdWUpXG4gIHBhZGRsZXNbY29uZmlnLmNvbG9yQ29kZXMub3JhbmdlXSA9IG5ldyBQYWRkbGUoZ2FtZSwgY29uZmlnLmNvbG9yQ29kZXMub3JhbmdlKVxuXG4gIHVwS2V5ID0gZ2FtZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLktleWJvYXJkLlcpXG4gIGRvd25LZXkgPSBnYW1lLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuS2V5Ym9hcmQuUylcblxudXBkYXRlQmx1ZSA9IC0+XG4gIGNvbnNvbGUubG9nICc6dXBkYXRlQmx1ZSdcblxuICBwYWRkbGVzW2NvbmZpZy5jb2xvckNvZGVzLmJsdWVdLnVwZGF0ZSgpXG5cbiAgIyBUT0RPIGhhbmRsZSBpbnB1dFxuICBjb25zb2xlLmxvZygndXBLZXknICsgdXBLZXkuaXNEb3duKVxuICBpZiB1cEtleS5pc0Rvd25cbiAgICBwYWRkbGVzW2NvbmZpZy5jb2xvckNvZGVzLmJsdWVdLm1vdmUoY29uZmlnLmRpckNvZGVzLnVwKVxuXG4gIGlmIGRvd25LZXkuaXNEb3duXG4gICAgcGFkZGxlc1tjb25maWcuY29sb3JDb2Rlcy5ibHVlXS5tb3ZlKGNvbmZpZy5kaXJDb2Rlcy5kb3duKVxuXG51cGRhdGVPcmFuZ2UgPSAtPlxuICBjb25zb2xlLmxvZyBcIjp1cGRhdGVPcmFuZ2VcIlxuXG4gIHBhZGRsZXNbY29uZmlnLmNvbG9yQ29kZXMuYmx1ZV0udXBkYXRlXG5cbiAgIyBUT0RPIHJ1biBBSSBkZWNpc2lvbnNcblxudXBkYXRlID0gLT5cbiAgY29uc29sZS5sb2cgJzp1cGRhdGUnXG5cbiAgdXBkYXRlQmx1ZSgpXG4gIHVwZGF0ZU9yYW5nZSgpXG5cbmdhbWUgPSBuZXcgUGhhc2VyLkdhbWUgY29uZmlnLnNjcmVlbldpZHRoLCBjb25maWcuc2NyZWVuSGVpZ2h0LCBQaGFzZXIuQVVUTywgJycsIHByZWxvYWQ6IHByZWxvYWQsIGNyZWF0ZTogY3JlYXRlLCB1cGRhdGU6IHVwZGF0ZVxuIiwiY29uZmlnID0ge1xuICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzM1MGYyOFwiLFxuXG4gIHNjcmVlbldpZHRoOiAxMDgwLFxuICBzY3JlZW5IZWlnaHQ6IDYwMCxcblxuICBzcHJpdGVTY2FsZTogOCxcblxuICBjb2xvckNvZGVzOiB7XG4gICAgYmx1ZTogMCxcbiAgICBvcmFuZ2U6IDFcbiAgfSxcblxuICBkaXJDb2Rlczoge1xuICAgIHVwOiAwLFxuICAgIGRvd246IDFcbiAgfSxcblxuICBwYWRkbGVTcGVlZDogNDAwLFxuICBwYWRkbGVNYXJnaW46IDQwXG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29uZmlnXG4iLCJjb25maWcgPSByZXF1aXJlIFwiLi9jb25maWcuY29mZmVlXCJcblxuQ3VieSA9IChnYW1lLCBwb3MpIC0+XG4gIHRoaXMucG9zID0gcG9zO1xuXG4gIHRoaXMuc3ByaXRlID0gZ2FtZS5hZGQuc3ByaXRlKHBvcy54LCBwb3MueSwgJ2N1YnknKVxuICB0aGlzLnNwcml0ZS5zY2FsZS5zZXRUbyhjb25maWcuc3ByaXRlU2NhbGUsIGNvbmZpZy5zcHJpdGVTY2FsZSlcblxuICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLnNwcml0ZSlcblxuICB0aGlzLnNwcml0ZS5ib2R5LnZlbG9jaXR5ID0gbmV3IFBoYXNlci5Qb2ludCgwLCAwKTsgIyBkb24ndCBtb3ZlIGJ5IGRlZmF1bHRcblxuICB0aGlzLmZpcmUgPSAoZGlyZWN0aW9uKSAtPlxuICAgIGNvbnNvbGUubG9nIFwiY3VieSBmaXJlZFwiXG4gICAgdGhpcy5zcHJpdGUuYm9keS52ZWxvY2l0eSA9IGRpcmVjdGlvbjsgIyBzaG9vdCBpdCFcblxuICB0aGlzLnRyYWlsID0gKGNvbG9yLCB0aW1lKSAtPlxuICAgIGNvbnNvbGUubG9nIFwic2hvdWxkIGVtaXRcIlxuXG4gIHJldHVybiB0aGlzXG5cbm1vZHVsZS5leHBvcnRzID0gQ3VieVxuIiwiY29uZmlnID0gcmVxdWlyZSBcIi4vY29uZmlnLmNvZmZlZVwiXG5cblBhZGRsZSA9IChnYW1lLCBjb2xvckNvZGUpIC0+XG4gIHRoaXMuY29sb3JDb2RlID0gY29sb3JDb2RlXG5cbiAgeCA9IDBcbiAgeSA9IGNvbmZpZy5zY3JlZW5IZWlnaHQgLyAyIC0gZ2FtZS5jYWNoZS5nZXRJbWFnZSgncGFkZGxlJykuaGVpZ2h0ICogY29uZmlnLnNwcml0ZVNjYWxlIC8gMlxuXG4gIHN3aXRjaCAoY29sb3JDb2RlKVxuICAgIHdoZW4gY29uZmlnLmNvbG9yQ29kZXMuYmx1ZVxuICAgICAgeCA9IGNvbmZpZy5wYWRkbGVNYXJnaW5cbiAgICB3aGVuIGNvbmZpZy5jb2xvckNvZGVzLm9yYW5nZVxuICAgICAgeCA9IGNvbmZpZy5zY3JlZW5XaWR0aCAtIGNvbmZpZy5wYWRkbGVNYXJnaW4gLSBnYW1lLmNhY2hlLmdldEltYWdlKCdwYWRkbGUnKS53aWR0aCAqIGNvbmZpZy5zcHJpdGVTY2FsZVxuXG4gIHRoaXMuc3ByaXRlID0gZ2FtZS5hZGQuc3ByaXRlKHgsIHksICdwYWRkbGUnKVxuICB0aGlzLnNwcml0ZS5zY2FsZS5zZXRUbyhjb25maWcuc3ByaXRlU2NhbGUsIGNvbmZpZy5zcHJpdGVTY2FsZSlcblxuICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLnNwcml0ZSlcblxuICB0aGlzLm1vdmUgPSAoZGlyZWN0aW9uKSAtPlxuICAgIGNvbnNvbGUubG9nIFwibW92aW5nXCJcblxuICAgIHN3aXRjaCBkaXJlY3Rpb25cbiAgICAgIHdoZW4gY29uZmlnLmRpckNvZGVzLnVwXG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkudmVsb2NpdHkgPSBuZXcgUGhhc2VyLlBvaW50KDAsIC1jb25maWcucGFkZGxlU3BlZWQpXG4gICAgICB3aGVuIGNvbmZpZy5kaXJDb2Rlcy5kb3duXG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkudmVsb2NpdHkgPSBuZXcgUGhhc2VyLlBvaW50KDAsIGNvbmZpZy5wYWRkbGVTcGVlZClcblxuICB0aGlzLnVwZGF0ZSA9IC0+XG4gICAgdGhpcy5zcHJpdGUuYm9keS52ZWxvY2l0eSA9IG5ldyBQaGFzZXIuUG9pbnQoMCwgMCk7ICMgZG9uJ3QgbW92ZSBieSBkZWZhdWx0XG5cbiAgcmV0dXJuIHRoaXNcbm1vZHVsZS5leHBvcnRzID0gUGFkZGxlXG4iXX0=
